!function(){"use strict";const t="RECIEVE_DATA",e="ERROR",n="temperature",o="select-start-date",c="select-end-date",a=1881,r=2006,l=12;let s;function i(){return s||(s=document.getElementById("data-grid")),s}function d(t,e){const n=t/(e+1),o=[];for(let t=1;t<=e;t++)o.push(n*t);return o}function u(){const t=i().getContext("2d"),{height:e,width:n}=t.canvas,o=d(n,l);t.fillStyle="rgba(255,255,255, 0.5)",o.forEach(n=>{t.fillRect(n,0,2,e)}),t.fillRect(0,e/2,n,2)}u();const f=t=>t;const h=new Worker("./worker.js");h.onmessage=function(o){try{const{data:c}=o;switch(c.type){case t:i().getContext("2d").clearRect(0,0,600,400),u(),function({data:t,route:e}){const o=e===n,c=i().getContext("2d"),{height:a,width:r}=c.canvas,s=d(r,l),u=a/2;c.fillStyle="#00e676",s.forEach((e,n)=>{const o=t[n];c.beginPath(),c.arc(e+1,u+3*o.v,4,0,2*Math.PI),c.fill()}),c.lineWidth=2,c.strokeStyle="#00e676",c.beginPath(),s.forEach((e,n)=>{const o=t[n];c.lineTo(e+1,u+3*o.v)}),c.stroke(),c.fillStyle="white",c.font=`${o?14:12}px Arial`;const f=o?"°":"мм.";s.forEach((e,n)=>{const o=t[n];c.fillText(`${o.v}${f}`,e+4,u+3*o.v-4)})}(c.payload),console.log("Client recieved",c.payload);break;case e:throw c.payload;default:throw new Error(`Unknown data type: ${c.type}`)}}catch(t){console.error(t)}};const m=function(t,e=f){return function(...n){return{type:t,payload:e(...n)}}}("FETCH_DATA",(t,e)=>({route:t,params:e}));function p(){g()}function y(t){const e="btn--selected";if(t.target.classList.contains(e))return t.preventDefault(),void t.stopPropagation;Array.prototype.forEach.call(document.getElementsByClassName(e),t=>t.classList.remove(e)),t.target.classList.add(e)}function E(t){t.preventDefault(),g()}function g(){const t=function(){const t={};[o,c].forEach(e=>{const n=document.getElementById(e);t[n.name]=n.value});const e=document.querySelector("#controls .btn--selected");return t.route=e.value,t}();h.postMessage(m(t.route,t))}function v(t,e){const n=document.getElementById(t),o=function(t,e){const n=document.createDocumentFragment();let o=t;for(;o<=e;){const t=document.createElement("option");t.textContent=o,t.value=o,n.appendChild(t),o++}return n}(a,r);o.querySelector(`[value="${e}"]`).selected=!0,n.appendChild(o)}v(o,a),v(c,r),[o,c].forEach(t=>{document.getElementById(t).addEventListener("change",p)}),document.getElementById("controls").addEventListener("submit",E),document.querySelectorAll('.btn[name="type"]').forEach(t=>t.addEventListener("click",y)),g()}();
