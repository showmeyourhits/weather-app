!function(){"use strict";const t="RECIEVE_DATA",e="ERROR",n="temperature";let o;const c=12;function a(){return o||(o=document.getElementById("data-grid")),o}function r(t,e){const n=t/(e+1),o=[];for(let t=1;t<=e;t++)o.push(n*t);return o}function l(){const t=a().getContext("2d"),{height:e,width:n}=t.canvas,o=r(n,c);t.fillStyle="white",o.forEach(n=>{t.fillRect(n,0,2,e)}),t.fillRect(0,e/2,n,2)}l();const s="select-start-date",i="select-end-date",d=1881,u=2006,f=t=>t;const h=new Worker("./worker.js");h.onmessage=function(o){try{const{data:s}=o;switch(s.type){case t:a().getContext("2d").clearRect(0,0,600,400),l(),function({data:t,route:e}){const o=a().getContext("2d"),{height:l,width:s}=o.canvas,i=r(s,c),d=l/2;o.fillStyle="#00e676",i.forEach((e,n)=>{const c=t[n];o.beginPath(),o.arc(e+1,d+3*c.v,4,0,2*Math.PI),o.fill()}),o.lineWidth=2,o.strokeStyle="#00e676",o.beginPath(),i.forEach((e,n)=>{const c=t[n];o.lineTo(e+1,d+3*c.v)}),o.stroke(),o.fillStyle="white",o.font="14px Arial";const u=e===n?"°":"мм.";i.forEach((e,n)=>{const c=t[n];o.fillText(`${c.v}${u}`,e+4,d+3*c.v-4)})}(s.payload),console.log("Client recieved",s.payload);break;case e:throw s.payload;default:throw new Error(`Unknown data type: ${s.type}`)}}catch(t){console.error(t)}};const m=function(t,e=f){return function(...n){return{type:t,payload:e(...n)}}}("FETCH_DATA",(t,e)=>({route:t,params:e}));function p(){g()}function y(t){const e="btn--selected";if(t.target.classList.contains(e))return t.preventDefault(),void t.stopPropagation;Array.prototype.forEach.call(document.getElementsByClassName(e),t=>t.classList.remove(e)),t.target.classList.add(e)}function E(t){t.preventDefault(),g()}function g(){const t=function(){const t={};[s,i].forEach(e=>{const n=document.getElementById(e);t[n.name]=n.value});const e=document.querySelector("#controls .btn--selected");return t.route=e.value,t}();h.postMessage(m(t.route,t))}function v(t,e){const n=document.getElementById(t),o=function(t,e){const n=document.createDocumentFragment();let o=t;for(;o<=e;){const t=document.createElement("option");t.textContent=o,t.value=o,n.appendChild(t),o++}return n}(d,u);o.querySelector(`[value="${e}"]`).selected=!0,n.appendChild(o)}v(s,d),v(i,u),[s,i].forEach(t=>{document.getElementById(t).addEventListener("change",p)}),document.getElementById("controls").addEventListener("submit",E),document.querySelectorAll('.btn[name="type"]').forEach(t=>t.addEventListener("click",y)),g()}();
